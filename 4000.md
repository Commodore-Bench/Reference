---
layout: default
title: $4000-$AEFF - BASIC Entry Vectors
---
# $4000-$AEFF - BASIC Entry Vectors

# BASIC Entry Vectors

## 16384 $4000 JHARD_RESET <a name="4000"></a>
<span class="badge badge-info">Entry point for the HARD_RESET routine, currently at [$4023](#4023).</span>

BASIC cold-start entry point. This is the normal entry point following a system
reset.

## 16387 $4003 JSOFT_RESET <a name="4003"></a>
<span class="badge badge-info">Entry point for the SOFT_RESET routine, currently at [$4009](#4009).</span>

BASIC warm-start entry point- This is the normal
entry point during a RUN/STOP-RESTORE NMI interrupt.

## 16390 $4006 JBASIC_IRQ <a name="4006"></a>
<span class="badge badge-info">Entry point for the BASIC_IRQ routine, currently at [$4009](#A84D).</span>

BASIC IRQ entry point. The target routine supports sprite
movement, sprite collision detection, light pen reading, and
the BASIC music statements. This is the normal entry point
during the system IRQ service routine.

## 16393 $4009 SOFT_RESET <a name="4009"></a>
### Performs a warm start of BASIC
This routine is the normal final step of the RUN/STOP-RESTORE sequence.
It resets the SID registers and sound locations, and calls the
routine at [$418D](#418D) to stop sprite
movement. However, it does not reinitialize the BASIC vectors
or pointers.

## 16416 $4020 Unused <a name="4020"></a>
Three unused bytes filled with the value 255/$FF.

## 16419 $4023 HARD_RESET <a name="4023"></a>
### Performs a cold start of BASIC
This routine is the normal final step of the reset sequence. It
performs a complete initialization of BASIC, including resetting all
vectors, pointers, and working storage locations to
their default values. This routine also includes a call to the
Kernal PHOENIX routine [$FF56](E000#FF56), which will start any function ROMs
that may be present, or boot a disk if one is in the
drive.

## 16453 $4045 <a name="4045"></a>
### Initializes BASIC pointers and constants
This is the main initalization routine of the cold-start sequence.
It is responsible for setting all RAM working storage
locations for BASIC to their default values.

## 16658 $4112 <a name="4112"></a>
###Initializes SID registers and sound routine locations
This routine sets all SID chip registers to 0/$00 and initializes
all locations associated with the SOUND and PLAY
statements.

## 16762 $417A <a name="417A"></a>
### Initializes MMU preconfiguration registers

## 16781 $418D <a name="418D"></a>
### Initializes sprite speed and direction table
This routine copies a 0/$00 into the speed control byte for
each entry in the sprite movement table at [$117E](1100#117E), effectively
halting all sprite motion.

## 16795 $419B <a name="419B"></a>
### Displays the power-on message
This routine displays the text from the following area of ROM.
Note that the free memory figure is part of the ROM message,
and may not reflect the actual amount of memory available to
BASIC.

## 16827 $41BB <a name="41BB"></a>
### Text for power-on message
<pre>
{CLR}
 COMMODORE BASIC V7.0 122365 BYTES FREE
   (C)1985 COMMODORE ELECTRONICS, LTD.
         (C)1977 MICROSOFT CORP.
           ALL RIGHTS RESERVED
</pre>

## 16977 $4251 <a name="4251"></a>
### Initializes BASIC indirect vectors
This routine copies the BASIC indirect vectors from the following table to locations 768-785/$0300-$0311, and initializes the vector at 764-765/$02FC-$02FD.

## 16999 $4267 <a name="4267"></a>
### Table of default vector values
This area contains the default addresses copied into the page 3
indirect vectors by the routine at [$4251](4251).

## 17017 $4279 <a name="4279"></a>
### Text for character retrieval routines
This area contains the code for CHRGET and the other page 3
character retrieval subroutines. The routines are copied into
RAM.

## 17102 $42CE <a name="42CE"></a>
### Assorted character retrieval subroutines

## 17162 $430A CRUNCH <a name="430A"></a>
### Tokenizes keywords in lines of BASIC program text

## 17328 $43B0 <a name="43B0"></a>
### Handles extended tokens

## 17356 $43CC <a name="43CC"></a>
### Deletes a character in the input buffer

## 17378 $43E2 <a name="43E2"></a>
### Searches keyword tables for match

## 17431 $4417 <a name="4417"></a>
### BASIC keyword tables
The following table holds the BASIC 7.0 keywords in token
number order. Bit 7 of the last character of each keyword will
be set to %1 to indicate the end of the keyword.

|Token|Keyword|Token|Keyword|
|-|-|-|-|
|128/$80|END|160/$A0|CLOSE|
|129/$81|FOR|161/$A1|GET|
|130/$82|NEXT|162/$A2|NEW|
|131/$83|DATA|163/$A3|TAB(|
|132/$84|INPUT#|164/$A4|TO|
|133/$85|INPUT|165/$A5|FN|
|134/$86|DIM|166/$A6|SPC(|
|135/$87|READ|167/$A7|THEN|
|136/$88|LET|168/$A8|NOT|
|137/$89|GOTO|169/$A9|STEP|
|138/$8A|RUN|170/$AA|+|
|139/$8B|IF|171/$AB|-|
|140/$8C|RESTORE|172/$AC|*|
|141/$8D|GOSUB|173/$AD|/|
|142/$8E|RETURN|174/$AE|^|
|143/$8F|REM|175/$AF|AND|
|144/$90|STOP|176/$B0|OR|
|145/$91|ON|177/$B1|>|
|146/$92|WAIT|178/$B2|=|
|147/$93|LOAD|179/$B3|<|
|148/$94|SAVE|180/$B4|SGN|
|149/$95|VERIFY|181/$B5|INT|
|150/$96|DEF|182/$B6|ABS|
|151/$97|POKE|183/$B7|USR|
|152/$98|PRINT#|184/$B8|FRE|
|153/$99|PRINT|185/$B9|POS|
|154/$9A|CONT|186/$BA|SQR|
|155/$9B|LIST|187/$BB|RND|
|156/$9C|CLR|188/$BC|LOG|
|157/$9D|CMD|189/$BD|EXP|
|158/$9E|SYS|190/$BE|COS|
|159/$9F|OPEN|191/$BF|SIN|
|192/$C0|TAN|224/$E0|CHAR|
|193/$C1|ATN|225/$E1|BOX|
|194/$C2|PEEK|226/$E2|CIRCLE|
|195/$C3|LEN|227/$E3|GSHAPE|
|196/$C4|STR$|228/$E4|SSHAPE|
|197/$C5|VAL|229/$E5|DRAW|
|198/$C6|ASC|230/$E6|LOCATE|
|199/$C7|CHR$|231/$E7|COLOR|
|200/$C8|LEFT$|232/$E8|SCNCLR|
|201/$C9|RIGHT$|233/$E9|SCALE|
|202/$CA|MID$|234/$EA|HELP|
|203/$CB|GO|235/$EB|DO|
|204/$CC|RGR|236/$EC|LOOP|
|205/$CD|RCLR|237/$EO|EXIT|
|206/$CE|function token extender|238/$EE|DIRECTORY|
|207/$CF|JOY|239/$EF|DSAVE|
|208/$D0|ROOT|240/$F0|DLOAD|
|209/$D1|OEC|241/$F1|HEADER|
|210/$D2|HEX$|242/$F2|SCRATCH|
|211/$D3|ERR$|243/$F3|COLLECT|
|212/$D4|INSTR|244/$F4|COPY|
|213/$D5|ELSE|245/$F5|RENAME|
|214/$D6|RESUME|246/$F6|BACKUP|
|215/$D7|TRAP|247/$F7|OELETE|
|216/$D8|TRON|248/$F8|RENUMBER|
|217/$D9|TROFF|249/$F9|KEY|
|218/$DA|SOUNO|250/$FA|MONITOR|
|219/$DB|VOL|251/$FB|USING|
|220/$DC|AUTO|252/$FC|UNTIL|
|221/$DD|PUOEF|253/$FO|WHILE|
|222/$DE|GRAPHIC|254/$FE|statement token extender|
|223/$DF|PAINT|||

## 17929 $4609 <a name="4609"></a>
### Table of extended token statements
BASIC 7.0 has too many keywords to have a one-byte token
for each. Additional statements use a two-byte token where
the first byte is always 254/$FE. This table holds the extended
token statement keywords in order of the second byte of the
token. Like the standard keywords, bit 7 of the last character
of each keyword will be set to %1.

|Token|Keyword|Token|Keyword|
|-|-|-|-|
|2/$02|BANK|21/$15|DCLEAR|
|3/$03|FILTER|22/$16|SPRSAV|
|4/$04|PLAY|23/$17|COLLISION|
|5/$05|TEMPO|24/$18|BEGIN|
|6/$06|MOVSPR|25/$19|BEND|
|7/$07|SPRITE|26/$1A|WINDOW|
|8/$08|SPRCOLOR|27/$1B|BOOT|
|9/$09|RREG|28/$1C|WIDTH|
|10/$0A|ENVELOPE|29/$1D|SPRDEF|
|11/$0B|SLEEP|30/$1E|QUIT|
|12/$0C|CATALOG|31/$1F|STASH|
|13/$0D|DOPEN|32/$20|(no keyword for this token)|
|14/$0E|APPEND|33/$21|FETCH|
|15/$0F|DCLOSE|34/$22|(no keyword for this token)|
|16/$10|BSAVE|35/$23|SWAP|
|17/$11|BLOAD|36/$24|OFF|
|18/$12|RECORD|37/$25|FAST|
|19/$13|CONCAT|38/$26|SLOW|

## 18121 $46C9 <a name="46C9"></a>
### Table of extended token functions
BASIC 7.0 has too many keywords to have a one-byte token
for each. Additional functions use a two-byte token where the
first byte is always 206/$CE. This table holds the extended
token function keywords in order of the second byte of the
token. Like the standard keywords, bit 7 of the last character
of each entry is set to % 1.

|Token|Keyword|
|-|-|
|2/$02|POT|
|3/$03|BUMP|
|4/$04|PEN|
|5/$05|RSPPOS|
|6/$06|RSPRITE|
|7/$07|RSPCOLOR|
|8/$08|XOR|
|9/$09|RWINDOW|
|10/$0A|POINTER|

## 18172 $46FC <a name="46FC"></a>
### Table of statement dispatch addresses
This area holds the address of the routines to execute tokens
128-162/$80-$A2. Because of the way statement execution is
handled, the values here are actually one less than the address
of the target routine. See Appendix F for a list of keyword
execution addresses.

## 18242 $4742 <a name="4742"></a>
### Table of statement dispatch addresses
This area holds the address of the routines to execute tokens
213-2S0/$DS-$FA. Because of the way statement execution is
handled, the values here are actually one less than the address
of the target routine. See Appendix F for a list of keyword
execution addresses.

## 18172 $46FC
### Table of statement dispatch addresses
This area holds the address of the routines to execute extended
statement tokens 2-38/$02-$26. Because of the way
statement execution is handled, the values here are actually
one less than the address of the target routine.

## 18317 $478D <a name="478D"></a>
### Table of function dispatch addresses
This area holds the address of the routines to execute tokens
180-211/$B4-$D3.

## 18454 $4816 <a name="4816"></a>
### Table of function dispatch addresses
This area holds the address of the routines to execute extended
function tokens 2-10/$02-$0A.

## 18472 $4828 <a name="4828"></a>
### Table of operator priorities and dispatch addresses
Each mathematical operator such as +, -, *, and / has a
three-byte entry in this table. The first byte is the priority of
the operator for expression evaluation and the next two are
the address of the routine to perform the specified operation.

## 18502 $4846 <a name="4846"></a>
### Prints unimplemented command message
BASIC 7.0 contains two unused keywords, QUIT and OFF.
Either of those will use this routine to print the UNIMPLEMENTED
COMMAND error message.

## 18507 $484B <a name="484B"></a>
### Table of BASIC error messages
This area holds text for the BASIC error messages in error
number order. Bit 7 in the last character of each message will
be set to %1 to mark the end of the message.


