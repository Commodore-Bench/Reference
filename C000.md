# $C000-$CFFF

Most major screen editor routines can, and should, be entered
through their respective entries in the following jump table.
Each three-byte table entry consists of a JMP opcode followed
by the address of the target routine.

## 49152 $C000 CINT <a name="C000"></a>
Entry point for the routine at 49275/$C07B which establishes
the default characteristics for both the 40- and 80-column displays.
This entry is part of both the reset and RUN/STOP RESTORE sequences.
No preliminary setup is required, but
the behavior of the routine is affected by the setting of the
initialization status flag (2564/$0A04). The keyboard decoding
table pointers and screen editor indirect vectors are initialized
only when bit 6 of the flag is %0. If you wish to preserve decoding
table pointers or indirect vectors while resetting other
screen editor characteristics, set this bit to %1 before you call
the routine.

## 49155 $C003 JDISPLY <a name="C003"></a>
Entry point for the routine at 52276/$CC34, which deposits a
screen code and attribute value at the current cursor position.
Call this entry with the accumulator holding the screen code
(not the character code) for the desired character and the X
register holding the attribute value for the character.

## 49158 $C006 KEYIN <a name="C006"></a>
Entry point for the routine at 49716/$C234, which retrieves a
single character from the keyboard. In official Commodore literature,
this routine has the rather nondescriptive name LP2.
This entry is used by the Kernal GETIN routine [SEEEB] when
the keyboard is the input device. (The keyboard, device 0, is
the 128's default input device.) Upon return, the accumulator
will contain the retrieved character. Be sure to see the warning
in the KEYIN entry about calling this routine directly.

## 49161 $C009 GETSCRN <a name="C009"></a>
Entry point for the routine at 49819/$C29B, which retrieves a
character from a line of keyboard or screen input. In official
Commodore literature, this routine has the rather nondescriptive
name LOOP5. This entry is used by the Kernal BASIN
routine [$EF06] when input is requested from the keyboard
(device 0) or the screen (device 3). The input source is determined
by the value in the flag at [214/$D6](0000#D6). When the flag has
a nonzero value, the character at the current cursor position is
read and returned in the accumulator. When the end of the
line of input is reached, the routine returns the code for the
RETURN character, the value 13/$0D. If the flag is zero, the
routine accepts characters from the keyboard and displays
them on the screen until RETURN is pressed. It then returns
the first character of the input in the accumulator and sets the
source flag to a nonzero value so that subsequent calls retrieve
characters from the input line displayed on the screen. In
either case, the source flag should be set only before the first
call to this routine for any given line of input.

For keyboard input, the starting and ending columns and
the row for the input line are set automatically. For screen input,
the character is read from the row specified in [235/$EB](0000#EB) at
the column specified in [236/$EC](0000#EC). These locations normally
hold the current cursor position and are advanced one position
to the right after each call to this routine. However, the locations
can also be reset to any row and column you desire. The
screen input line ends on the row specified in 2608/$0A30 at
the column specified in [234/$EA](0000#EA). Neither of these locations is
set automatically, so you must specify the ending position
before calling for input from the screen. The X and Y register
contents will be preserved during this routine.

## 49164 $C00C PRINT <a name="C00C"></a>
Entry point for the routine at 50989/$C72D, which prints a
character at the current cursor position using the current
attribute (in [241/$F1](0000#F1)). This routine is used by the Kernal
BSOUT routine [$EF79] when the screen is specified as the
output device. The screen, device 3, is the 128's default
output device. Call the entry with the accumulator containing the
character code (not the screen code) for the character to be
displayed. The accumulator and X and Y register contents are
preserved during this routine.

## 49167 $C00F SCRORG <a name="C00F"></a>
Entry point for the routine at 52315/$CC5B, which returns
information about the current window size. This entry is the
target of the Kernal jump table entry SCRORG [$FFED], Upon
return, the X register will hold the number of columns (minus 1)
in the current window, and the Y register will hold the
number of rows (minus 1). The accumulator will hold the
maximum column number for the active screen (39 for the 40-
column display or 79 for the 80-column display).

## 49170 $C012 SCNKEY <a name="C012"></a>
Entry point for the routine at 50525/$C55D, which scans the
keyboard matrix for a keypress. This entry is the target of the
Kernal jump table entry SCNKEY [$FF9F]. If a key is found to
be pressed, its corresponding character code will be placed in
the keyboard buffer for retrieval by the GETIN or BASIN
routines, unless the key is a shift key or programmable key.
Both of those get special handling (see the SCNKEY routine
for details).

## 49173 $C015 REPEAT <a name="C015"></a>
Entry point for the routine at 50769/$C651, actually an
alternative entry into the SCNKEY routine. At this point,
the routine expects location [212/$D4](0000#D4) to contain the keyscan matrix
code for the current key, [211/$D3](0000#D3) to hold the status of the
shift keys, and [204-205/$CC-$CD](0000#CC) to point to the keyboard
decoding table selected according to the shift key status. This
table entry is most useful when intercepting the KEYVEC indirect
vector (see the entry at 826/$033A for details).

## 49176 $C018 PLOT <a name="C018"></a>
Entry point for the routine at 52330/$CC6A, which reads or
sets the cursor position. This entry is the target of the Kernal
jump table entry PLOT [$FFF0], If called with the carry bit
clear, the cursor is moved to the row specified in the X register
and the column specified in the Y register (the row and column
settings are relative to the current home position of the
window). The carry bit will be set upon return if the specified
position is outside the current window boundaries. If called
with the carry set, the routine returns with the row number of
the current cursor position in the X register and the column
number in the Y register (again, the numbers will be relative
to the current home position of the window).

## 49179 $C01B CRSR80 <a name="C01B"></a>
Entry point for the routine at 52567/$CD57, which moves the
cursor on the 80-column display to the row and column specified in
[235/$EB](0000#EB) and [236/$EC](0000#EC), respectively. The 40-column
display's cursor is maintained by software, so it follows these
pointers automatically, but the position of the 80-column
cursor must be set explicitly.

## 49182 $C01E ESCAPE <a name="C01E"></a>
Direct entry point into the escape sequence handling routine
[$C9BE], Normal entry into the handler begins with an indirect
jump through the ESCVEC vector (824-825/$0338-$0339).
That vector normally points to this table entry, which in turn
jumps back into the handling routine at the point immediately
following the indirect jump.

## 49185 $C021 KEYSET <a name="C021"></a>
Entry point for the routine at 52386/$CCA2, which redefines
a programmable key. This entry is the target of the Kernal
jump table entry PFKEY [$FF65]. Call this entry with the X
register containing the key number (1-10), the Y register
containing the length of the definition string, and the accumulator
holding the address of a two-byte zero-page pointer to the
string. The zero-page byte immediately following the pointer
should contain the number of the memory bank in which the
string resides.

## 49188 $C024 SCNIRQ <a name="C024"></a>
Entry point for the routine at 49556/$C194, which handles
the screen editor portion of the IRQ handling sequence. This
includes setting up the screen display mode, scanning the keyboard,
and managing the cursor for 40-column display.

## 49191 $C027 INIT80 <a name="C027"></a>
Entry point for the routine at 52748/$CE0C, which initializes
the character patterns for the 80-column display. This entry is
the target of the Kernal jump table entry INIT80 [$FF62]. The
routine copies the contents of the 40-column display's character
ROM ($D000-$DFFF in bank 14) into the character definition area
of the 8563 chip's private block of RAM.

## 49194 $C027 SWAPPER <a name="C027"></a>
Entry point for the routine at 52526/$CD2E, which switches
active screen displays. This entry is the target of the Kernal
jump table entry SWAPPER [$FF5Fj. The routine exchanges
the screen variable tables, tab stop tables, and line link tables,
and toggles the active screen flag ([215/$D7](0000#D7)). This will redirect
printing to whichever screen was previously inactive.

## 49197 $C02D WINDOW <a name="C02D"></a>
Entry point for the routine at 51739/$CA1B, which sets the
position of a corner of the output window. To set the top row
and left column of the window, call this entry with the carry
bit clear, the accumulator holding the row number, and the X
register holding the column number. To set the bottom row
and right column of the window, call this entry with the carry
bit set, the accumulator holding the row number, and the X
register holding the column number.

## 49200 $C030 Unused <a name="C030"></a>
Three unused bytes filled with the value 255/$FF.

## 49203 $C033 SADDRTBL <a name="C033"></a>
### Table of screen line starting addresses
Locations 49203-49227/$C033-$C04B hold the low bytes of
the address in 40-column screen memory for the column 0 position
in each of the 25 screen lines. Locations
[49228-49252/$C04C-$C064](#C04C)
hold the high bytes for the line addresses for
the default 40-column screen position (at 1024/$0400). These
table values are used in conjunction with the screen base addresses,
2619/$0A3B for the 40-column screen or $2606/$0A2E
for the 80-column screen, to calculate the actual starting address
for each line of screen and attribute memory.

## 49253 $C065 SCNVCTRS <a name="C065"></a>
### Table of default screen editor indirect vectors
The five two-byte values here are copied to the screen editor
indirect vector table at 820-829/$0334-$033D when the system
is reset. In each case, the default indirect vector merely returns
control to the location immediately following the indirect jump,

## 49263 $C06F KEYPTRS <a name="C06F"></a>
### Table of default keyboard decoding table pointers
The six two-byte values here, the addresses of the ROM keyboard
decoding tables, are copied to the keyboard decode
pointer table at 830-841/$033E-$0349 when the system is
reset.
